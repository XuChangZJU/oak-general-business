<!-- index.wxml -->
<view class="page-body">
    <view class="search-bar">
        <t-search placeholder="搜索" value="{{searchValue || ''}}" action="搜索" bind:lincancel="searchConfirm" bind:clear="searchCancel" bind:change="searchChange" bind:submit="searchConfirm" bind:action-click="searchConfirm" />
    </view>
    <block wx:for="{{users}}" wx:key="index">
        <t-cell data-id="{{item.id}}" bind:tap="bindClicked" title="{{item.nickname}}">
            <t-image slot="left-icon" t-class="avatar" src="{{item.avatar}}" mode="aspectFit" shape="circle"></t-image>
            <view slot="description" class="description">
                  <text class="name">姓名: {{item.name  || '未设置'}}</text>
                  <text class="mobile">手机: {{item.mobile  || '未设置'}}</text>
                  <view class="relation">
                      <block wx:if="{{item.relations.length}}" wx:for="{{item.relations}}" wx:for-item="item2" wx:for-index="index2" wx:key="index2">
                          <t-tag variant="outline" theme="primary" >
                              {{t(entity + ':r.' +  item2)}}
                          </t-tag>
                      </block>
                  </view>
            </view>
        </t-cell>
    </block>
    <t-fab style="right: 0; bottom: 32px" icon="add" bind:click="onAdd" />
</view>
<t-action-sheet id="t-action-sheet" items="{{btnItems}}" visible="{{visible}}" bind:selected="onActionSelect" bind:cancel="onActionCancel" bind:close="onActionClose" />